var E=Object.defineProperty;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var I=(e,a,t)=>a in e?E(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,b=(e,a)=>{for(var t in a||(a={}))S.call(a,t)&&I(e,t,a[t]);if(y)for(var t of y(a))N.call(a,t)&&I(e,t,a[t]);return e};/* empty css              *//* empty css               *//* empty css              */import{S as v,s as h}from"./StorageConfig.32373933.js";import{l as z}from"./lodash.0b804683.js";/* empty css              */import{_ as $}from"./index.f55e6c2d.js";import{d as C,L as A,P as F,j as L,r as D,o as m,e as O,w as p,f as o,m as _,n as g,p as w,t as k,G as x,H,U as V,I as R,A as T,J as G,K as J,B as j,y as K,k as M,l as q,E as Q,F as W,v as X}from"./vendor.b0611375.js";function Y(e){return new Promise((a,t)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>a(r.result),r.onerror=d=>t(d)})}const Z=C({name:"PrizeItem",components:{LoadingOutlined:A,PlusOutlined:F},props:{itemData:Object,itemIndex:Number,employees:Object},setup(e,a){const t=L(b({},e.itemData));function r(n){s("update")}const d=async n=>(!n.url&&!n.preview&&(n.preview=await Y(n)),t.img=n.url||n.preview,s("update"),!1);function l(){s("update")}function i(){s("update")}function u(){s("del")}function s(n){a.emit("handleItem",{type:n,index:e.itemIndex,data:t})}return{handleDel:u,handleInput:l,handleInputNumber:i,handleEmployeeChange:r,beforeUpload:d,prizeItemData:t}}}),ee=e=>(x("data-v-4fa3109f"),e=e(),H(),e),ae=["src"],te={key:1},ne=ee(()=>g("div",{class:"ant-upload-text"},"Upload",-1)),oe={style:{"text-align":"center"}};function se(e,a,t,r,d,l){const i=D("plus-outlined"),u=V,s=R,n=T,f=G,P=J,U=j,B=K;return m(),O(B,{layout:"vertical"},{default:p(()=>[o(u,{name:"avatar","list-type":"picture-card",class:"avatar-uploader","show-upload-list":!1,"before-upload":e.beforeUpload},{default:p(()=>[e.prizeItemData.img?(m(),_("img",{key:0,src:e.prizeItemData.img,alt:"avatar"},null,8,ae)):(m(),_("div",te,[o(i),ne]))]),_:1},8,["before-upload"]),o(n,{label:e.$t("prize.name")},{default:p(()=>[o(s,{value:e.prizeItemData.name,"onUpdate:value":a[0]||(a[0]=c=>e.prizeItemData.name=c),placeholder:e.$t("prize.name"),onChange:e.handleInput},null,8,["value","placeholder","onChange"])]),_:1},8,["label"]),o(n,{label:e.$t("prize.number")},{default:p(()=>[o(f,{style:{width:"100%"},value:e.prizeItemData.number,"onUpdate:value":a[1]||(a[1]=c=>e.prizeItemData.number=c),min:0,max:100,onChange:e.handleInputNumber},null,8,["value","onChange"])]),_:1},8,["label"]),o(n,{label:e.$t("prize.employees")},{default:p(()=>[o(P,{value:e.prizeItemData.employees,"onUpdate:value":a[2]||(a[2]=c=>e.prizeItemData.employees=c),mode:"multiple",style:{width:"100%"},options:e.employees,onChange:e.handleEmployeeChange},null,8,["value","options","onChange"])]),_:1},8,["label"]),o(n,null,{default:p(()=>[g("div",oe,[o(U,{onClick:e.handleDel},{default:p(()=>[w(k(e.$t("prize.del")),1)]),_:1},8,["onClick"])])]),_:1})]),_:1})}var re=$(Z,[["render",se],["__scopeId","data-v-4fa3109f"]]);const le=C({name:"Prize",components:{PrizeItem:re},setup(){const e=M([]),a=[];q(()=>{const l=v.get(h.employee);z.exports.isEmpty(l)||z.exports.forEach(l,i=>{a.push({value:i,label:i})}),e.value=v.get(h.prize)});function t(){const l={name:"",img:"",number:0,employees:[]};e.value.push(l),d()}function r(l){const{type:i,index:u,data:s}=l;switch(i){case"update":e.value[u]=s;break;case"del":e.value.splice(u,1);break}d()}function d(){v.set(h.prize,e.value)}return{handleAdd:t,prizes:e,employees:a,handlePrizeItem:r}}}),ie={class:"prize"},pe={class:"item"},de={class:"enter"};function ue(e,a,t,r,d,l){const i=D("prize-item"),u=j,s=Q;return m(),_("div",ie,[o(s,{title:e.$t("prize.add"),bordered:!1},{default:p(()=>[(m(!0),_(W,null,X(e.prizes,(n,f)=>(m(),_("div",pe,[o(i,{"item-data":n,"item-index":f,employees:e.employees,onHandleItem:e.handlePrizeItem},null,8,["item-data","item-index","employees","onHandleItem"])]))),256)),g("div",de,[o(u,{danger:"",type:"primary",onClick:e.handleAdd},{default:p(()=>[w(k(e.$t("work.add")),1)]),_:1},8,["onClick"])])]),_:1},8,["title"])])}var be=$(le,[["render",ue],["__scopeId","data-v-01c8d888"]]);export{be as default};
